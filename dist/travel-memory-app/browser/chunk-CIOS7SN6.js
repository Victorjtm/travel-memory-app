import{a as q,b as H}from"./chunk-Z2IDUWGY.js";import{a as G}from"./chunk-62JJFTRD.js";import{b as V,c as x,d as T,e as W,f as j,g as N,i as k,j as z,k as B,l as L,m as R}from"./chunk-3BKCMDI7.js";import{Da as w,Ea as c,G as l,Ga as I,H as v,Ia as g,Ja as u,Ka as f,W as d,_ as h,ba as S,db as y,eb as P,ga as C,gb as O,ka as _,lb as F,mb as D,oa as a,ob as E,pa as o,qa as p,ta as A,va as b,wa as M}from"./chunk-XY36RKC2.js";function J(m,i){if(m&1&&(a(0,"option",22),c(1),o()),m&2){let n=i.$implicit;_("value",n.id),d(),I(" ",n.nombre," ")}}function K(m,i){if(m&1&&(a(0,"option",22),c(1),o()),m&2){let n=i.$implicit;_("value",n.id),d(),I(" ",n.descripcion," ")}}function Q(m,i){if(m&1){let n=A();a(0,"div")(1,"label"),p(2,"i",23),c(3," Actividad Disponible:"),o(),a(4,"select",24),f("ngModelChange",function(r){l(n);let s=M();return u(s.actividad.actividadDisponibleId,r)||(s.actividad.actividadDisponibleId=r),v(r)}),b("change",function(){l(n);let r=M();return v(r.actualizarCamposDesdeActividad())}),a(5,"option",6),c(6,"-- Seleccione una actividad --"),o(),C(7,K,2,2,"option",7),o()()}if(m&2){let n=M();d(4),g("ngModel",n.actividad.actividadDisponibleId),d(3),_("ngForOf",n.actividadesDisponibles)}}var U=class m{constructor(i,n,e,r,s){this.route=i;this.router=n;this.tiposActividadService=e;this.actividadesDisponiblesService=r;this.actividadesItinerariosService=s}viajePrevistoId;itinerarioId;actividadId;actividad={id:0,viajePrevistoId:0,itinerarioId:0,tipoActividadId:0,actividadDisponibleId:null,nombre:"",descripcion:"",horaInicio:"09:00",horaFin:"10:00"};tiposActividad=[];actividadesDisponibles=[];tipoActividadSeleccionado=null;ngOnInit(){this.route.params.subscribe(i=>{this.viajePrevistoId=+i.viajePrevistoId,this.itinerarioId=+i.itinerarioId;let n=i.actividadId;n==="nuevo"?(this.actividadId=0,this.actividad={id:0,viajePrevistoId:this.viajePrevistoId,itinerarioId:this.itinerarioId,tipoActividadId:0,actividadDisponibleId:null,nombre:"",descripcion:"",horaInicio:"09:00",horaFin:"10:00"}):(this.actividadId=+n,this.actividad.viajePrevistoId=this.viajePrevistoId,this.actividad.itinerarioId=this.itinerarioId,this.actividadId&&this.cargarActividadExistente()),this.cargarTiposActividad()})}cargarTiposActividad(){this.tiposActividadService.getTiposActividad().subscribe(i=>{this.tiposActividad=i},i=>{console.error("Error cargando tipos de actividad:",i)})}cargarActividadesDisponibles(){this.tipoActividadSeleccionado&&(this.actividad.tipoActividadId=this.tipoActividadSeleccionado,this.actividadesDisponiblesService.getActividadesDisponibles(this.tipoActividadSeleccionado).subscribe(i=>{this.actividadesDisponibles=i},i=>{console.error("Error cargando actividades disponibles:",i)}))}actualizarCamposDesdeActividad(){let i=this.actividadesDisponibles.find(n=>n.id===this.actividad.actividadDisponibleId);i&&(this.actividad.nombre||(this.actividad.nombre=i.descripcion.substring(0,30)),this.actividad.descripcion||(this.actividad.descripcion=i.descripcion))}cargarActividadExistente(){this.actividadesItinerariosService.getById(this.actividadId).subscribe(i=>{this.actividad=i,this.tipoActividadSeleccionado=i.tipoActividadId,this.cargarActividadesDisponibles()},i=>{console.error("Error cargando actividad:",i)})}guardarActividad(){this.actividad.id?this.actividadesItinerariosService.update(this.actividad.id,this.actividad).subscribe(()=>{this.router.navigate(["/itinerarios",this.viajePrevistoId])},i=>{console.error("Error actualizando actividad:",i)}):this.actividadesItinerariosService.create(this.actividad).subscribe(()=>{this.router.navigate(["/itinerarios",this.viajePrevistoId])},i=>{console.error("Error creando actividad:",i)})}cancelar(){this.router.navigate(["/itinerarios",this.viajePrevistoId])}static \u0275fac=function(n){return new(n||m)(h(D),h(E),h(q),h(H),h(G))};static \u0275cmp=S({type:m,selectors:[["app-formulario-actividad-itinerario"]],decls:43,vars:11,consts:[["formActividad","ngForm"],[1,"contenedor"],[3,"ngSubmit"],["type","hidden","name","itinerarioId",3,"ngModelChange","ngModel"],[1,"fa","fa-tags"],["name","tipoActividad","required","",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"fa","fa-header"],["type","text","name","nombre",3,"ngModelChange","ngModel"],[1,"fa","fa-align-left"],["name","descripcion",3,"ngModelChange","ngModel"],[1,"horario-container"],[1,"fa","fa-clock"],["type","time","name","horaInicio","required","",3,"ngModelChange","ngModel"],["type","time","name","horaFin","required","",3,"ngModelChange","ngModel"],[1,"botones-container"],["type","submit",1,"btn-guardar",3,"disabled"],[1,"fa","fa-save"],["type","button",1,"btn-cancelar",3,"click"],[1,"fa","fa-times"],[3,"value"],[1,"fa","fa-list-alt"],["name","actividadDisponibleId",3,"ngModelChange","change","ngModel"]],template:function(n,e){if(n&1){let r=A();a(0,"div",1)(1,"h2"),c(2),o(),a(3,"form",2,0),b("ngSubmit",function(){return l(r),v(e.guardarActividad())}),a(5,"input",3),f("ngModelChange",function(t){return l(r),u(e.actividad.itinerarioId,t)||(e.actividad.itinerarioId=t),v(t)}),o(),a(6,"div")(7,"label"),p(8,"i",4),c(9," Tipo de Actividad:"),o(),a(10,"select",5),f("ngModelChange",function(t){return l(r),u(e.tipoActividadSeleccionado,t)||(e.tipoActividadSeleccionado=t),v(t)}),b("change",function(){return l(r),v(e.cargarActividadesDisponibles())}),a(11,"option",6),c(12,"-- Seleccione un tipo --"),o(),C(13,J,2,2,"option",7),o()(),C(14,Q,8,2,"div",8),a(15,"div")(16,"label"),p(17,"i",9),c(18," Nombre:"),o(),a(19,"input",10),f("ngModelChange",function(t){return l(r),u(e.actividad.nombre,t)||(e.actividad.nombre=t),v(t)}),o()(),a(20,"div")(21,"label"),p(22,"i",11),c(23," Descripci\xF3n:"),o(),a(24,"textarea",12),f("ngModelChange",function(t){return l(r),u(e.actividad.descripcion,t)||(e.actividad.descripcion=t),v(t)}),o()(),a(25,"div",13)(26,"div")(27,"label"),p(28,"i",14),c(29," Hora Inicio:"),o(),a(30,"input",15),f("ngModelChange",function(t){return l(r),u(e.actividad.horaInicio,t)||(e.actividad.horaInicio=t),v(t)}),o()(),a(31,"div")(32,"label"),p(33,"i",14),c(34," Hora Fin:"),o(),a(35,"input",16),f("ngModelChange",function(t){return l(r),u(e.actividad.horaFin,t)||(e.actividad.horaFin=t),v(t)}),o()()(),a(36,"div",17)(37,"button",18),p(38,"i",19),c(39),o(),a(40,"button",20),b("click",function(){return l(r),v(e.cancelar())}),p(41,"i",21),c(42," Cancelar "),o()()()()}if(n&2){let r=w(4);d(2),I("",e.itinerarioId?"Editar":"Agregar"," Actividad para Itinerario"),d(3),g("ngModel",e.actividad.itinerarioId),d(5),g("ngModel",e.tipoActividadSeleccionado),d(3),_("ngForOf",e.tiposActividad),d(),_("ngIf",e.actividadesDisponibles.length>0),d(5),g("ngModel",e.actividad.nombre),d(5),g("ngModel",e.actividad.descripcion),d(6),g("ngModel",e.actividad.horaInicio),d(5),g("ngModel",e.actividad.horaFin),d(2),_("disabled",!r.form.valid),d(2),I(" ",e.actividad.id?"Actualizar":"Guardar"," ")}},dependencies:[O,y,P,R,N,z,B,V,k,x,T,L,j,W,F],styles:['@charset "UTF-8";.contenedor[_ngcontent-%COMP%]{max-width:700px;margin:2rem auto;padding:2rem;background:#fdfdfd;border-radius:12px;box-shadow:0 4px 10px #0000001a}h2[_ngcontent-%COMP%]{text-align:center;color:#3f51b5;margin-bottom:1.5rem}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.2rem}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:.3rem;color:#333}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:.6rem;border:1px solid #ccc;border-radius:8px;font-size:1rem;width:100%}form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:80px;resize:vertical}form[_ngcontent-%COMP%]   .acciones[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:1.5rem}form[_ngcontent-%COMP%]   .acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.7rem 1.5rem;border:none;border-radius:8px;font-size:.95rem;cursor:pointer;transition:background-color .3s ease}form[_ngcontent-%COMP%]   .acciones[_ngcontent-%COMP%]   .btn-guardar[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}form[_ngcontent-%COMP%]   .acciones[_ngcontent-%COMP%]   .btn-guardar[_ngcontent-%COMP%]:hover{background-color:#45a049}form[_ngcontent-%COMP%]   .acciones[_ngcontent-%COMP%]   .btn-cancelar[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}form[_ngcontent-%COMP%]   .acciones[_ngcontent-%COMP%]   .btn-cancelar[_ngcontent-%COMP%]:hover{background-color:#e53935}.error[_ngcontent-%COMP%]{color:#f44336;font-size:.85rem;margin-top:-.8rem;margin-bottom:.8rem}']})};export{U as FormularioActividadItinerarioComponent};
