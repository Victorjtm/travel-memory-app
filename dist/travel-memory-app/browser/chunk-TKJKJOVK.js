import{a as q,b as H}from"./chunk-QJSC7YGQ.js";import{a as G}from"./chunk-Y6ERAQ3U.js";import{a as V,b as x,c as T,d as W,e as j,f as N,h as k,i as z,j as B,k as L,l as R}from"./chunk-43PYKW3P.js";import{C as I,F as _,J as n,K as a,L as p,M as A,N as b,O as M,P as w,Q as c,S as C,U as g,V as u,W as f,ja as y,ka as P,ma as O,n as l,o as m,qa as F,ra as D,ta as E,u as d,w as h,x as S}from"./chunk-J7AOECWQ.js";function J(v,i){if(v&1&&(n(0,"option",22),c(1),a()),v&2){let o=i.$implicit;_("value",o.id),d(),C(" ",o.nombre," ")}}function K(v,i){if(v&1&&(n(0,"option",22),c(1),a()),v&2){let o=i.$implicit;_("value",o.id),d(),C(" ",o.descripcion," ")}}function Q(v,i){if(v&1){let o=A();n(0,"div")(1,"label"),p(2,"i",23),c(3," Actividad Disponible:"),a(),n(4,"select",24),f("ngModelChange",function(r){l(o);let s=M();return u(s.actividad.actividadDisponibleId,r)||(s.actividad.actividadDisponibleId=r),m(r)}),b("change",function(){l(o);let r=M();return m(r.actualizarCamposDesdeActividad())}),n(5,"option",6),c(6,"-- Seleccione una actividad --"),a(),I(7,K,2,2,"option",7),a()()}if(v&2){let o=M();d(4),g("ngModel",o.actividad.actividadDisponibleId),d(3),_("ngForOf",o.actividadesDisponibles)}}var U=class v{constructor(i,o,e,r,s){this.route=i;this.router=o;this.tiposActividadService=e;this.actividadesDisponiblesService=r;this.actividadesItinerariosService=s}viajePrevistoId;itinerarioId;actividadId;actividad={id:0,viajePrevistoId:0,itinerarioId:0,tipoActividadId:0,actividadDisponibleId:null,nombre:"",descripcion:"",horaInicio:"09:00",horaFin:"10:00"};tiposActividad=[];actividadesDisponibles=[];tipoActividadSeleccionado=null;ngOnInit(){this.route.params.subscribe(i=>{this.viajePrevistoId=+i.viajePrevistoId,this.itinerarioId=+i.itinerarioId,this.actividadId=+i.actividadId,this.actividad.viajePrevistoId=this.viajePrevistoId,this.actividad.itinerarioId=this.itinerarioId,this.cargarTiposActividad(),this.actividadId&&this.cargarActividadExistente()})}cargarTiposActividad(){this.tiposActividadService.getTiposActividad().subscribe(i=>{this.tiposActividad=i},i=>{console.error("Error cargando tipos de actividad:",i)})}cargarActividadesDisponibles(){this.tipoActividadSeleccionado&&(this.actividad.tipoActividadId=this.tipoActividadSeleccionado,this.actividadesDisponiblesService.getActividadesDisponibles(this.tipoActividadSeleccionado).subscribe(i=>{this.actividadesDisponibles=i},i=>{console.error("Error cargando actividades disponibles:",i)}))}actualizarCamposDesdeActividad(){let i=this.actividadesDisponibles.find(o=>o.id===this.actividad.actividadDisponibleId);i&&(this.actividad.nombre||(this.actividad.nombre=i.descripcion.substring(0,30)),this.actividad.descripcion||(this.actividad.descripcion=i.descripcion))}cargarActividadExistente(){this.actividadesItinerariosService.getById(this.actividadId).subscribe(i=>{this.actividad=i,this.tipoActividadSeleccionado=i.tipoActividadId,this.cargarActividadesDisponibles()},i=>{console.error("Error cargando actividad:",i)})}guardarActividad(){this.actividad.id?this.actividadesItinerariosService.update(this.actividad.id,this.actividad).subscribe(()=>{this.router.navigate(["/itinerarios",this.viajePrevistoId])},i=>{console.error("Error actualizando actividad:",i)}):this.actividadesItinerariosService.create(this.actividad).subscribe(()=>{this.router.navigate(["/itinerarios",this.viajePrevistoId])},i=>{console.error("Error creando actividad:",i)})}cancelar(){this.router.navigate(["/itinerarios",this.viajePrevistoId])}static \u0275fac=function(o){return new(o||v)(h(D),h(E),h(q),h(H),h(G))};static \u0275cmp=S({type:v,selectors:[["app-formulario-actividad-itinerario"]],decls:43,vars:11,consts:[["formActividad","ngForm"],[1,"contenedor"],[3,"ngSubmit"],["type","hidden","name","itinerarioId",3,"ngModelChange","ngModel"],[1,"fa","fa-tags"],["name","tipoActividad","required","",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"fa","fa-header"],["type","text","name","nombre",3,"ngModelChange","ngModel"],[1,"fa","fa-align-left"],["name","descripcion",3,"ngModelChange","ngModel"],[1,"horario-container"],[1,"fa","fa-clock"],["type","time","name","horaInicio","required","",3,"ngModelChange","ngModel"],["type","time","name","horaFin","required","",3,"ngModelChange","ngModel"],[1,"botones-container"],["type","submit",1,"btn-guardar",3,"disabled"],[1,"fa","fa-save"],["type","button",1,"btn-cancelar",3,"click"],[1,"fa","fa-times"],[3,"value"],[1,"fa","fa-list-alt"],["name","actividadDisponibleId",3,"ngModelChange","change","ngModel"]],template:function(o,e){if(o&1){let r=A();n(0,"div",1)(1,"h2"),c(2),a(),n(3,"form",2,0),b("ngSubmit",function(){return l(r),m(e.guardarActividad())}),n(5,"input",3),f("ngModelChange",function(t){return l(r),u(e.actividad.itinerarioId,t)||(e.actividad.itinerarioId=t),m(t)}),a(),n(6,"div")(7,"label"),p(8,"i",4),c(9," Tipo de Actividad:"),a(),n(10,"select",5),f("ngModelChange",function(t){return l(r),u(e.tipoActividadSeleccionado,t)||(e.tipoActividadSeleccionado=t),m(t)}),b("change",function(){return l(r),m(e.cargarActividadesDisponibles())}),n(11,"option",6),c(12,"-- Seleccione un tipo --"),a(),I(13,J,2,2,"option",7),a()(),I(14,Q,8,2,"div",8),n(15,"div")(16,"label"),p(17,"i",9),c(18," Nombre:"),a(),n(19,"input",10),f("ngModelChange",function(t){return l(r),u(e.actividad.nombre,t)||(e.actividad.nombre=t),m(t)}),a()(),n(20,"div")(21,"label"),p(22,"i",11),c(23," Descripci\xF3n:"),a(),n(24,"textarea",12),f("ngModelChange",function(t){return l(r),u(e.actividad.descripcion,t)||(e.actividad.descripcion=t),m(t)}),a()(),n(25,"div",13)(26,"div")(27,"label"),p(28,"i",14),c(29," Hora Inicio:"),a(),n(30,"input",15),f("ngModelChange",function(t){return l(r),u(e.actividad.horaInicio,t)||(e.actividad.horaInicio=t),m(t)}),a()(),n(31,"div")(32,"label"),p(33,"i",14),c(34," Hora Fin:"),a(),n(35,"input",16),f("ngModelChange",function(t){return l(r),u(e.actividad.horaFin,t)||(e.actividad.horaFin=t),m(t)}),a()()(),n(36,"div",17)(37,"button",18),p(38,"i",19),c(39),a(),n(40,"button",20),b("click",function(){return l(r),m(e.cancelar())}),p(41,"i",21),c(42," Cancelar "),a()()()()}if(o&2){let r=w(4);d(2),C("",e.itinerarioId?"Editar":"Agregar"," Actividad para Itinerario"),d(3),g("ngModel",e.actividad.itinerarioId),d(5),g("ngModel",e.tipoActividadSeleccionado),d(3),_("ngForOf",e.tiposActividad),d(),_("ngIf",e.actividadesDisponibles.length>0),d(5),g("ngModel",e.actividad.nombre),d(5),g("ngModel",e.actividad.descripcion),d(6),g("ngModel",e.actividad.horaInicio),d(5),g("ngModel",e.actividad.horaFin),d(2),_("disabled",!r.form.valid),d(2),C(" ",e.actividad.id?"Actualizar":"Guardar"," ")}},dependencies:[O,y,P,R,N,z,B,V,k,x,T,L,j,W,F],styles:['@charset "UTF-8";.contenedor[_ngcontent-%COMP%]{max-width:700px;margin:2rem auto;padding:2rem;background:#fdfdfd;border-radius:12px;box-shadow:0 4px 10px #0000001a}h2[_ngcontent-%COMP%]{text-align:center;color:#3f51b5;margin-bottom:1.5rem}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.2rem}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:.3rem;color:#333}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:.6rem;border:1px solid #ccc;border-radius:8px;font-size:1rem;width:100%}form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:80px;resize:vertical}form[_ngcontent-%COMP%]   .acciones[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:1.5rem}form[_ngcontent-%COMP%]   .acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.7rem 1.5rem;border:none;border-radius:8px;font-size:.95rem;cursor:pointer;transition:background-color .3s ease}form[_ngcontent-%COMP%]   .acciones[_ngcontent-%COMP%]   .btn-guardar[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}form[_ngcontent-%COMP%]   .acciones[_ngcontent-%COMP%]   .btn-guardar[_ngcontent-%COMP%]:hover{background-color:#45a049}form[_ngcontent-%COMP%]   .acciones[_ngcontent-%COMP%]   .btn-cancelar[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}form[_ngcontent-%COMP%]   .acciones[_ngcontent-%COMP%]   .btn-cancelar[_ngcontent-%COMP%]:hover{background-color:#e53935}.error[_ngcontent-%COMP%]{color:#f44336;font-size:.85rem;margin-top:-.8rem;margin-bottom:.8rem}']})};export{U as FormularioActividadItinerarioComponent};
